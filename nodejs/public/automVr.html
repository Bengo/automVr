<!DOCTYPE html>
<html>
   <head>
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <!-- Bootstrap -->
       <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
       <link href="css/bootstrap-responsive.css" rel="stylesheet">
	<link href="css/bootstrapSwitch.css" rel="stylesheet">
       <link href="css/bengo.css" rel="stylesheet">
   </head>
   <body>
       <ul class="breadcrumb">
           <li><strong>Commande des volets roulants</strong></li>
       </ul>
       <div class="tabbable"> <!-- Only required for left/right tabs -->
           <ul class="nav nav-tabs">
               <li class="active"><a href="#generale" data-toggle="tab">Zone g&eacute;n&eacute;rale</a></li>
               <li><a href="#pdv" data-toggle="tab">Pi&egrave;ce de vie</a></li>
               <li><a href="#chRdc" data-toggle="tab">Chambre Rdc</a></li>
               <li><a href="#chEtage" data-toggle="tab">Chambres &eacutetage</a></li>
	       <li><a href="#options" data-toggle="tab">Options</a></li>
           </ul>
           <div class="tab-content">
               <div class="tab-pane active" id="generale">
                   <div class="row-fluid">
                       <div class="span11 offset1">
                           <div class="span2">
                               <button data-zone="generale" data-position="haut" class="btn btn-inverse btn-large btn-block actionvr"><i class="icon-white icon-arrow-up"></i> Lever</button>
                           </div>
                           <div class="span2">
                               <button data-zone="generale" data-position="pause" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-pause"></i> Pause</button>
                           </div>
                           <div class="span2">
                               <button data-zone="generale" data-position="bas" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-arrow-down"></i> Baisser</button>
                           </div>
                       </div>

                   </div>
               </div>
               <div class="tab-pane" id="pdv">
                   <div class="row-fluid">
                       <div class="span11 offset1">
                           <div class="span2">
                               <button data-zone="pdv" data-position="haut" class="btn btn-inverse btn-large btn-block actionvr"><i class="icon-white icon-arrow-up"></i> Lever</button>
                           </div>
                           <div class="span2">
                               <button data-zone="pdv" data-position="pause" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-pause"></i> Pause</button>
                           </div>
                           <div class="span2">
                               <button data-zone="pdv" data-position="bas" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-arrow-down"></i> Baisser</button>
                           </div>
                       </div>
                   </div>                    
               </div>
               <div class="tab-pane" id="chRdc">
                   <div class="row-fluid">
                       <div class="span11 offset1">
                           <div class="span2">
                               <button data-zone="chrdc" data-position="haut" class="btn btn-inverse btn-large btn-block actionvr"><i class="icon-white icon-arrow-up"></i> Lever</button>
                           </div>
                           <div class="span2">
                               <button data-zone="chrdc" data-position="pause" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-pause"></i> Pause</button>
                           </div>
                           <div class="span2">
                               <button data-zone="chrdc" data-position="bas" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-arrow-down"></i> Baisser</button>
                           </div>
                       </div>
                   </div>                    
               </div>
               <div class="tab-pane" id="chEtage">
                   <div class="row-fluid">
                       <div class="span11 offset1">
                           <div class="span2">
                               <button data-zone="etage" data-position="haut" class="btn btn-inverse btn-large btn-block actionvr"><i class="icon-white icon-arrow-up"></i> Lever</button>
                           </div>
                           <div class="span2">
                               <button data-zone="etage" data-position="pause" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-pause"></i> Pause</button>
                           </div>
                           <div class="span2">
                               <button data-zone="etage" data-position="bas" class="btn btn-inverse btn-large  btn-block actionvr"><i class="icon-white icon-arrow-down"></i> Baisser</button>
                           </div>
                       </div>
                   </div>                    
               </div>
		<div class="tab-pane" id="options">
                   <div class="row-fluid">
                       <div class="span11 offset1">
				<div class="span5 offset1">
					<h3>Eph&eacutem&eacuteride</h3>
					<table class="table">
						<tr>
							<td>Lever du soleil</td>
							<td id="leverSoleil"></td>
						</tr>
						<tr>
							<td>Coucher du soleil</td>
							<td id="coucherSoleil"></td>
						</tr>
					</table>
				</div>
				<div class="span5">
					<h3>Bornes Sc&eacutenario</h3>
					<table class="table">
						<tr>
							<td>heure d'ouverture automatique entre</td>
							<td id="borneInfLever"></td>
							<td> et</td>
							<td id="borneSupLever"></td>
						</tr>
						<tr>
							<td>heure de fermeture automatique entre </td>
							<td id="borneInfCoucher"></td>
							<td> et</td>
							<td id="borneSupCoucher"></td>
						</tr>
					</table>
				</div>
                       </div>
                   </div>
		<div class="span11 offset1">
			<div class="span5 offset1">
				<h3>Mode Fete</h3>
				    <div id="switchModeFete" class="switch" data-animated="true" data-on="success" data-off="danger">
				   	 <input  type="checkbox"/>
				    </div>
			</div>
		</div>                   
               </div>
           </div>
       </div>
	<script src="http://code.jquery.com/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrapSwitch.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$("[class*='actionvr']").click(function(){
				$.get("/api/volets/"+$(this).data("zone")+"/"+$(this).data("position"));
			});

			//on charge les options
			$.getJSON("/api/options",function(data) {
				$("td#leverSoleil").text(data.Ephemeride.leverSoleil);
				$("td#coucherSoleil").text(data.Ephemeride.coucherSoleil);
				$("td#borneInfLever").text(data.Scenario.borneInfLever);
				$("td#borneSupLever").text(data.Scenario.borneSupLever);
				$("td#borneInfCoucher").text(data.Scenario.borneInfCoucher);
				$("td#borneSupCoucher").text(data.Scenario.borneSupCoucher);
				if(data.ModeFete.modeFete == "1"){
					$('#switchModeFete').bootstrapSwitch('setState', true);
				}
			});

			//on ecoute les modification du mode fete
			$('#switchModeFete').on('switch-change', function (e, data) {
			    var value = data.value;
				if(value){
					$.get("automVr.php", { option: "modeFete", value: "on" } );
				} else {
					$.get("automVr.php", { option: "modeFete", value: "off" } );
				}
			});
		});
	</script>
   </body>
</html>
